package net.rezmason.engram.menus {		// IMPORT STATEMENTS	import flash.display.DisplayObject;	import flash.display.DisplayObjectContainer;	import flash.display.Shape;	import flash.display.SimpleButton;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.geom.Rectangle;	import flash.filters.GlowFilter;	import flash.text.StaticText;	import flash.text.TextField;	import flash.text.TextFormatAlign;		import net.rezmason.display.ColorSprite;	import net.rezmason.gui.GUIAbstract;	import net.rezmason.gui.GUIBtnKey;	import net.rezmason.gui.GUIButton;	import net.rezmason.gui.GUICheckBox;	import net.rezmason.gui.GUITab;	import net.rezmason.media.SoundManager;	import net.rezmason.utils.camelToCaps;		public class MenuBase extends ColorSprite {		// INSTANCE PROPERTIES		private var currentButton:GUIButton;		private var currentChild:DisplayObject;		//private var buttons:Array = new Array;		protected var _defaultYes:GUIButton, _defaultNo:GUIButton;		private var scratch:int;		private var soundManager:SoundManager;				public function MenuBase(colorGUI:Boolean = true, 		alignButtons:Boolean = true, nameGUI:Boolean = true):void {						var ike:int;						if (nameGUI || colorGUI) {				for (ike = 0; ike < numChildren; ike += 1) {					currentChild = getChildAt(ike);					if (currentChild is GUIAbstract && colorGUI) {						addColorChild(currentChild);					}										if (currentChild is GUIButton && nameGUI) {						(currentChild as GUIButton).text = camelToCaps(currentChild.name.replace("btn", ""));					} else if (currentChild is GUITab && nameGUI) {						(currentChild as GUITab).text = camelToCaps(currentChild.name.replace("tb", ""));					}				}			}						if (alignButtons) {				addEventListener(Event.ADDED, decideOnButtonTextAlignments);			}						soundManager = SoundManager.INSTANCE;			addSounds(this);		}				// GETTERS & SETTERS				public function get defaultYes():GUIButton {			return _defaultYes;		}				public function get listening():Boolean {			return false;		}				public function get defaultNo():GUIButton {			return _defaultNo;		}				// PUBLIC METHODS				public function prepare(...args):void {					}				public function decideOnButtonTextAlignments(event:Event = null):void {						if (event) {				removeEventListener(Event.ADDED, decideOnButtonTextAlignments);			}						var buttons:Array = new Array;			var middleLine:Number;			var scratch:Number;			var ike:int;			middleLine = (getBounds(this).left + getBounds(this).right) / 2;						// find buttons			for (ike = 0; ike < numChildren; ike += 1) {				if (getChildAt(ike) is GUIButton) {					currentButton = getChildAt(ike) as GUIButton;										var bounds:Rectangle = currentButton.getBounds(currentButton);					bounds.x += currentButton.x;					bounds.y += currentButton.y;										if (bounds.right < middleLine - 5) {						currentButton.textAlign = TextFormatAlign.LEFT;					} else if (bounds.left > middleLine + 5) {						currentButton.textAlign = TextFormatAlign.RIGHT;					} else {						currentButton.textAlign = TextFormatAlign.CENTER;					}				}			}		}				public function keyResponder(keyVal:String):void {					}				// PRIVATE & PROTECTED METHODS				private function addSounds(target:DisplayObjectContainer):void {			var ike:int;			var dObj:DisplayObject;			for (ike = 0; ike < target.numChildren; ike += 1) {				dObj = target.getChildAt(ike);				if (dObj is GUIBtnKey || dObj is GUIButton || dObj is GUITab || dObj.name.indexOf("btn") == 0) {					dObj.addEventListener(MouseEvent.MOUSE_DOWN, playButtonSound, false, 0, true);				} else if (dObj is GUICheckBox || dObj is GridMenuElement) {					dObj.addEventListener(MouseEvent.CLICK, playCheckBoxSound, false, 0, true);				}			}		}				protected function playButtonSound(event:Event = null):void {			soundManager.play("buttonSound");		}				protected function playCheckBoxSound(event:Event = null):void {			soundManager.play("settingSound");		}	}}